<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Life ‚Äî Loved Ones Only</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: black;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      font-family: sans-serif;
    }
    #slide {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: opacity 1s ease-in-out;
      opacity: 0;
    }
    #slide.visible {
      opacity: 1;
    }
    #musicToggle {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.7);
      color: #000;
      padding: 10px 20px;
      border-radius: 30px;
      cursor: pointer;
      z-index: 999;
      font-weight: bold;
    }
  </style>
</head>
<body>

<img id="slide" src="" alt="Slideshow">

<div id="musicToggle">‚è∏ Pause Music</div>

<audio id="bgMusic" autoplay loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
  // 1. Netlify Identity check
  netlifyIdentity.on('init', user => {
    if (!user) {
      alert("Oops‚Ä¶ This page is for loved ones only üíñ\nPlease go to home and login.");
      window.location.href = "/";
    }
  });
  netlifyIdentity.init();

  // 2. Slideshow logic
  const imgs = Array.from({ length: 9 }, (_, i) => `photo${i+1}.jpg`);
  let idx = 0;
  const slide = document.getElementById('slide');

  function showNext() {
    slide.classList.remove('visible');
    setTimeout(() => {
      slide.src = imgs[idx];
      slide.onload = () => slide.classList.add('visible');
    }, 500);
    idx = (idx + 1) % imgs.length;
  }

  window.addEventListener('load', () => {
    slide.src = imgs[0];
    slide.onload = () => slide.classList.add('visible');
    setInterval(showNext, 4000);
  });

  // 3. Music controls
  const music = document.getElementById('bgMusic');
  const toggle = document.getElementById('musicToggle');
  music.volume = 0.2;

  toggle.addEventListener('click', () => {
    if (music.paused) {
      music.play();
      toggle.textContent = '‚è∏ Pause Music';
    } else {
      music.pause();
      toggle.textContent = '‚ñ∂ Play Music';
    }
  });
</script>

</body>
</html>
