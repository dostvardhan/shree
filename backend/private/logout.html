<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Signing out…</title>
  <style>
    body{
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#6b2b2b;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(255,236,240,0.25), transparent 20%),
        linear-gradient(160deg,#fff0ef 0%, #ffd6d6 40%, #ffb3b3 100%);
    }
    .card{background:#fff; padding:26px 30px; border-radius:14px;
      box-shadow:0 12px 30px rgba(0,0,0,.10); text-align:center}
    .muted{font-size:14px;color:#8b4a4a;margin-top:8px}
  </style>
</head>
<body>
  <div class="card" role="status" aria-live="polite">
    <h2>Signing out…</h2>
    <div class="muted">Taking you to the home page.</div>
  </div>

  <script>
    (function(){
      // --- Auth0 config (same as your project) ---
      const AUTH0_DOMAIN = "dev-zzhjbmtzoxtgoz31.us.auth0.com";
      const CLIENT_ID    = "6sfOCkf0BFVHsuzfPJCHoLDffZSNJjzT";
      const RETURN_TO    = location.origin + "/index.html";

      // 1) Clear local/session state no matter what
      try { localStorage.clear(); sessionStorage.clear(); } catch(e){}

      // 2) If SPA client already on page, prefer SDK logout
      const trySpaLogout = async () => {
        try {
          // window.auth0Client if you created it global; or window.auth0 from SPA SDKs
          const client = (window.auth0Client || window.auth0 || null);
          if (client && typeof client.logout === "function") {
            client.logout({ logoutParams: { returnTo: RETURN_TO, client_id: CLIENT_ID }});
            return true;
          }
        } catch(e){}
        return false;
      };

      // 3) Hard redirect to Auth0 universal logout (always clears Auth0 session)
      const hardLogout = () => {
        const url =
          `https://${AUTH0_DOMAIN}/v2/logout?client_id=${encodeURIComponent(CLIENT_ID)}&returnTo=${encodeURIComponent(RETURN_TO)}`;
        // replace() so back button से protected pages न खुलें
        location.replace(url);
      };

      // kick it off
      trySpaLogout().then(done => { if (!done) hardLogout(); });
      // safety net
      setTimeout(hardLogout, 1500);
    })();
  </script>
</body>
</html>
