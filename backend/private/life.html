<!DOCTYPE html>
<html lang="en">
<head>
  <!-- CSP (correct) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 script-src 'self' 'unsafe-inline' 'unsafe-eval';
                 connect-src 'self' https:;
                 img-src 'self' data:;
                 style-src 'self' 'unsafe-inline';
                 media-src 'self';">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sweet Memories — Shreshtha</title>

  <style>
    :root{
      --cream:#FFE7DA; --peach:#FFB59E; --red:#FF6B6B;
      --text:#6e2430; --panel:rgba(255,255,255,.05);
      --radius:16px; --shadow:0 18px 40px rgba(0,0,0,.32);
    }
    *{box-sizing:border-box}
    a{text-decoration:none;color:inherit}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Playfair Display",serif;
      color:var(--text);
      overflow-y:auto;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(255,236,240,0.25), transparent 20%),
        radial-gradient(900px 500px at 95% 85%, rgba(255,240,230,0.18), transparent 18%),
        linear-gradient(160deg, #fff0ef 0%, #ffd6d6 18%, #ffc0be 38%, #ffb3b3 60%, #ffb0b0 100%);
      background-attachment: fixed;
    }

    /* background layers */
    .bg-grad{position:fixed;inset:0;z-index:0}
    .bg-dither{position:fixed;inset:0;z-index:1;opacity:.12;mix-blend-mode:overlay;
      background:repeating-linear-gradient(0deg,rgba(255,255,255,.03)0px,rgba(255,255,255,.03)2px,rgba(0,0,0,.02)2px,rgba(0,0,0,.02)4px)}
    .bg-layer{position:fixed;inset:0;z-index:2;pointer-events:none}

    .bg-heart{position:absolute;font-size:13px;opacity:.65;text-shadow:0 1px 6px rgba(0,0,0,.25);animation:floatUp linear forwards}
    @keyframes floatUp{0%{transform:translateY(0) scale(1);opacity:.55}100%{transform:translateY(-110vh) scale(1.25);opacity:0}}

    header{padding:28px 18px 6px;text-align:center;position:relative;z-index:6}
    .logo{font-size:46px;color:var(--text);text-shadow:0 2px 10px rgba(0,0,0,.22)}

    /* small chips nav */
    .page-links{ margin-top:8px; text-align:center; font-size:14px; }
    .page-links a{
      display:inline-block; padding:6px 10px; margin:0 4px; border-radius:16px;
      background:rgba(255,255,255,0.30); color:#5a0013;
      box-shadow:0 4px 8px rgba(0,0,0,0.10); text-decoration:none;
    }
    .page-links a:hover{ background:rgba(255,255,255,0.40); }

    .wrap{max-width:1120px;margin:14px auto 110px;padding:0 18px;position:relative;z-index:5}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:22px}

    .card{
      position:relative;background:var(--panel);border-radius:var(--radius);
      box-shadow:var(--shadow);overflow:hidden;transition:transform .28s cubic-bezier(.2,.9,.3,1);
    }
    .card:hover{transform:translateY(-6px)}
    .photo{display:block;width:100%;height:auto;object-fit:cover;background:#fff9f7;max-height:460px}
    .meta{padding:12px 14px 16px;text-align:center;font-style:italic;font-size:15px;color:var(--text)}

    /* subtle per-card hearts */
    .card .soft-heart{position:absolute;pointer-events:none;opacity:.36;animation:softRise 5s ease-in-out infinite;will-change:transform,opacity}
    @keyframes softRise{0%{transform:translateY(6px);opacity:.18}50%{transform:translateY(-6px);opacity:.35}100%{transform:translateY(6px);opacity:.18}}

    /* hover burst */
    .burst{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none}
    .spark{position:absolute;font-size:12px;text-shadow:0 2px 6px rgba(0,0,0,.35);animation:burstMove 1.6s ease-out forwards;opacity:.95}
    @keyframes burstMove{0%{transform:translate(0,0) scale(1);opacity:1}100%{transform:translate(var(--dx),var(--dy)) scale(1.6);opacity:0}}

    /* canvas hearts */
    #fxCanvas{position:fixed;inset:0;width:100vw;height:100vh;pointer-events:none;z-index:50;}

    /* life page – tiny cute music icon overrides */
    #musicHeartWrap{ right:14px; bottom:14px; z-index:160; opacity:.97; }
    #musicHeartBtn{
      width:40px; height:40px; font-size:18px; border:none; border-radius:14px;
      background: radial-gradient(circle at 35% 30%, #ffe9f2 0%, #ffc9d6 100%);
      box-shadow: 0 6px 16px rgba(220,80,110,0.14);
      transition: transform .16s ease, box-shadow .16s ease;
    }
    #musicHeartBtn:hover{ transform: translateY(-2px); box-shadow: 0 10px 22px rgba(220,80,110,0.22); }
    #musicHeartBtn.playing{ transform: scale(1.03); box-shadow:0 12px 26px rgba(220,80,110,0.26); }
    #musicVolDot{
      position:absolute; right:-5px; top:-5px;
      width:14px; height:14px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff7d6, #ffd66a);
      border:2px solid rgba(255,255,255,0.95); box-shadow:0 4px 8px rgba(255,170,100,0.22);
    }
    #musicVolPop{ right:8px; bottom:60px; width:190px; padding:8px 10px; border-radius:10px; }
    #musicVolRange{ height:5px; }
    #musicMuteBtn{ padding:4px 6px; border-radius:6px; }
  </style>
</head>
<body>

  <div class="bg-grad"></div>
  <div class="bg-dither"></div>
  <div class="bg-layer" id="bgLayer"></div>

  <header>
    <div class="logo">Sweet Memories of Shreshtha's Life</div>
    <div class="page-links">
      <a href="gallery.html">Gallery</a> |
      <a href="upload.html">Upload</a> |
      <a href="/logout.html">Logout</a>
    </div>
  </header>

  <main class="wrap">
    <section class="grid" id="grid">
      <article class="card"><a href="photo1.html"><img class="photo" src="photos/photo1.jpg" alt=""></a><div class="meta">"A smile is the beauty of the soul."</div></article>
      <article class="card"><a href="photo2.html"><img class="photo" src="photos/photo2.jpg" alt=""></a><div class="meta">"Memories are timeless treasures of the heart."</div></article>
      <article class="card"><a href="photo3.html"><img class="photo" src="photos/photo3.jpg" alt=""></a><div class="meta">"Happiness looks good on you."</div></article>
      <article class="card"><a href="photo4.html"><img class="photo" src="photos/photo4.jpg" alt=""></a><div class="meta">"Collect moments, not things."</div></article>
      <article class="card"><a href="photo5.html"><img class="photo" src="photos/photo5.jpg" alt=""></a><div class="meta">"Every picture tells a story."</div></article>
      <article class="card"><a href="photo6.html"><img class="photo" src="photos/photo6.jpg" alt=""></a><div class="meta">"Smiles are contagious."</div></article>
      <article class="card"><a href="photo7.html"><img class="photo" src="photos/photo7.jpg" alt=""></a><div class="meta">"Joy is the best makeup."</div></article>
      <article class="card"><a href="photo8.html"><img class="photo" src="photos/photo8.jpg" alt=""></a><div class="meta">"A moment lasts all of a second, but the memory lives on forever."</div></article>
      <article class="card"><a href="photo9.html"><img class="photo" src="photos/photo9.jpg" alt=""></a><div class="meta">"Keep smiling, it makes people wonder what you're up to."</div></article>
    </section>
  </main>

  <!-- ambient background hearts -->
  <script>
  (function bgHearts(){
    const host = document.getElementById('bgLayer');
    const colors = ["#ffd6e0","#ffb7c5","#ffd27a","#ffc4a3","#fff0f6"];
    function spawn(){
      const d = document.createElement('div');
      d.className = 'bg-heart';
      d.textContent = '❤';
      d.style.left = (4 + Math.random()*92) + 'vw';
      d.style.bottom = '-20px';
      d.style.fontSize = (8 + Math.random()*20) + 'px';
      d.style.color = colors[Math.floor(Math.random()*colors.length)];
      d.style.animationDuration = (10 + Math.random()*10) + 's';
      host.appendChild(d);
      setTimeout(()=> d.remove(), 22000);
    }
    for(let i=0;i<20;i++) setTimeout(spawn, i*180);
    setInterval(spawn, 900);
  })();
  </script>

  <!-- per-card soft hearts & burst -->
  <script>
  document.querySelectorAll(".card").forEach(card => {
    (function ambient(){
      const n = 4 + (Math.random()*3|0);
      const palette = ["#ffd6e0","#ffb7c5","#ffd27a","#fff0f6"];
      for(let i=0;i<n;i++){
        const s = document.createElement("div");
        s.className = "soft-heart";
        s.textContent = "❤";
        s.style.color = palette[(Math.random()*palette.length)|0];
        s.style.left = (6 + Math.random()*88) + "%";
        s.style.top = (8 + Math.random()*72) + "%";
        s.style.fontSize = (8 + Math.random()*12) + "px";
        s.style.animationDuration = (4 + Math.random()*3) + "s";
        card.appendChild(s);
      }
    })();

    card.addEventListener("mouseenter", () => {
      const burst = document.createElement("div");
      burst.className = "burst"; card.appendChild(burst);
      const pieces = 12;
      const bColors = ["#ffd27a","#ff9fb3","#ffd6e0","#ffc4a3","#ffffffcc"];
      for(let i=0;i<pieces;i++){
        const sp = document.createElement("div");
        sp.className = "spark"; sp.textContent = "❤";
        const angle = Math.random()*Math.PI*2;
        const dist = 50 + Math.random()*90;
        sp.style.setProperty("--dx", Math.cos(angle)*dist + "px");
        sp.style.setProperty("--dy", Math.sin(angle)*(-dist) + "px");
        sp.style.left = "0"; sp.style.top = "0";
        sp.style.fontSize = (9 + Math.random()*12) + "px";
        sp.style.color = bColors[(Math.random()*bColors.length)|0];
        burst.appendChild(sp);
        setTimeout(()=> sp.remove(), 1600);
      }
      setTimeout(()=> burst.remove(), 1700);
    });
  });
  </script>

  <!-- Canvas Hearts (fixed innerWidth/innerHeight) -->
  <canvas id="fxCanvas"></canvas>
  <script>
  (function(){
    const c = document.getElementById('fxCanvas'); if (!c) return;
    const ctx = c.getContext('2d');
    const DPR = Math.max(1, window.devicePixelRatio || 1);
    let W=0,H=0, hearts=[];

    const COLORS = ['#dff7ff','#fff9d6','#ffe9d2','#ffdce6','#e9f7e9','#eae8ff','#fff0f6','#fff4de'];
    const R=(a,b)=>Math.random()*(b-a)+a;

    function resize(){
      W = Math.floor(innerWidth * DPR);
      H = Math.floor(innerHeight * DPR);
      c.width = W; c.height = H;
      c.style.width='100vw'; c.style.height='100vh';
    }
    function spawn(){
      if (hearts.length > 26) return;
      hearts.push({ x:R(0,W), y:H + R(10*DPR,160*DPR), s:R(14,36), vx:R(-6,6), vy:-R(14,36), a:R(.55,.98), r:R(-.5,.5), vr:R(-.012,.012), color:COLORS[(Math.random()*COLORS.length)|0] });
    }
    function draw(px,py,scale,rot,alpha,color){
      ctx.save(); ctx.translate(px,py); ctx.rotate(rot); ctx.scale(scale,scale);
      ctx.globalAlpha = Math.min(1, alpha*1.05);
      ctx.shadowColor=color; ctx.shadowBlur=12*scale;
      const g=ctx.createRadialGradient(0,-0.12,0.05, 0,0.12,1.0);
      g.addColorStop(0,color); g.addColorStop(0.6,color); g.addColorStop(1,'rgba(255,255,255,0.08)');
      ctx.fillStyle=g;
      ctx.beginPath(); ctx.moveTo(0,-0.5);
      ctx.bezierCurveTo(0.45,-1.05,1.15,-0.05,0,0.8);
      ctx.bezierCurveTo(-1.15,-0.05,-0.45,-1.05,0,-0.5);
      ctx.fill();
      ctx.globalAlpha=0.55*alpha; ctx.fillStyle='rgba(255,255,255,0.95)';
      ctx.beginPath(); ctx.ellipse(0.18,-0.28,0.12,0.06,-0.4,0,Math.PI*2); ctx.fill();
      ctx.restore();
    }
    function tick(){
      ctx.clearRect(0,0,W,H);
      if (Math.random()<0.12) spawn();
      hearts.forEach(h=>{ h.x+=h.vx*0.018; h.y+=h.vy*0.018; h.r+=h.vr; h.a-=0.00095; });
      hearts = hearts.filter(h=> h.y>-160*DPR && h.a>0.02);
      hearts.forEach(h=> draw(h.x,h.y,(h.s/52)*DPR,h.r,h.a,h.color));
      requestAnimationFrame(tick);
    }
    addEventListener('resize', resize, {passive:true});
    resize(); tick();
  })();
  </script>

  <!-- Global music (one include only) -->
  <link rel="stylesheet" href="/assets/css/music-heart.css">
  <script src="/assets/js/music-heart.js" defer></script>
</body>
</html>

