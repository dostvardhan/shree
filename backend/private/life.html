<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Shreshtha — Life Moments</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fffaf6;
      --panel:#ffffff;
      --accent:#6b8e23;
      --muted:#5b6a53;
      --soft:#f3efe8;
      --rose:#ff7aa2;
      --shadow: 0 12px 30px rgba(8,10,8,0.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #f7fbf6 0%, #fffefc 100%);
      color: #23322a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      min-height:100vh;
    }

    /* Header */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:18px 28px;
      background: linear-gradient(90deg, rgba(107,142,35,0.98), rgba(53,85,30,0.98));
      color:white;
      box-shadow: 0 6px 18px rgba(6,10,6,0.12);
      position:sticky;
      top:0;
      z-index:20;
    }
    .brand {
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo {
      width:56px; height:56px; border-radius:12px;
      background:linear-gradient(135deg,#f97316,#ef4444);
      display:flex; align-items:center; justify-content:center; font-weight:700; color:white;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      font-size:18px;
    }
    .title {
      line-height:1;
    }
    .title h1 { margin:0; font-size:18px; font-weight:700; }
    .title p { margin:0; font-size:12px; opacity:0.92; }

    nav a {
      color: rgba(255,255,255,0.95);
      text-decoration:none;
      margin-left:14px;
      font-weight:600;
    }
    nav a.button {
      background: rgba(255,255,255,0.12);
      padding:8px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
    }

    /* Main container */
    .container {
      max-width:1160px;
      margin:28px auto;
      padding:0 20px 80px;
    }

    /* Page header */
    .page-head {
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:12px;
      margin-bottom:18px;
    }
    .page-head h2 { margin:0; font-size:28px; color:#243a21; }
    .page-desc { color:var(--muted); font-size:14px; margin-top:6px; }

    /* Grid */
    .photo-grid {
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:20px;
    }

    /* Card */
    .photo-card {
      background:var(--panel);
      border-radius:14px;
      overflow:hidden;
      position:relative;
      box-shadow: var(--shadow);
      transition: transform 300ms ease, box-shadow 300ms ease;
      border: 1px solid rgba(10,12,10,0.03);
    }
    .photo-card::after {
      content:'';
      position:absolute; inset:0; pointer-events:none;
      background: linear-gradient(180deg, rgba(0,0,0,0) 45%, rgba(0,0,0,0.04) 100%);
    }
    .photo-card a { display:block; text-decoration:none; color:inherit; }

    .photo-thumb {
      width:100%;
      height:220px;
      display:block;
      object-fit:cover;
      transition: transform 450ms cubic-bezier(.2,.9,.3,1), filter 300ms;
      transform-origin:center center;
      will-change: transform;
    }

    .photo-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 20px 40px rgba(10,18,8,0.12);
    }
    .photo-card:hover .photo-thumb {
      transform: scale(1.08);
      filter: saturate(1.06) contrast(1.02);
      cursor:pointer;
    }

    .meta {
      padding:14px 16px 18px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:center;
    }
    .quote {
      font-style:italic;
      color:var(--muted);
      font-size:14px;
      line-height:1.3;
    }
    .byline {
      font-size:12px;
      color:#97a38f;
      text-align:right;
    }

    /* hearts animation */
    .floating-heart {
      position:fixed;
      pointer-events:none;
      font-size:18px;
      opacity:0.85;
      animation: floatUp linear forwards;
      transform-origin:center;
      z-index:5;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.12));
    }
    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity:1; }
      100% { transform: translateY(-720px) scale(1.4); opacity:0; }
    }

    /* small screens */
    @media (max-width:980px) {
      .photo-grid { grid-template-columns: repeat(2, 1fr); }
      .photo-thumb { height:200px; }
    }
    @media (max-width:560px) {
      .photo-grid { grid-template-columns: 1fr; }
      header { padding:14px 16px; }
      .photo-thumb { height:180px; }
      .page-head { flex-direction:column; align-items:flex-start; gap:8px; }
    }

    /* subtle footer */
    footer.site-foot {
      max-width:1160px; margin:36px auto 80px; text-align:center; color:#7f8b7b; font-size:13px;
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">SP</div>
      <div class="title">
        <h1>Shreshtha's Memories</h1>
        <p>Curated scrapbook — private & loved</p>
      </div>
    </div>

    <nav>
      <a href="gallery.html" class="button">Gallery</a>
      <a href="upload.html" class="button">Upload</a>
      <a href="#" id="logout">Logout</a>
    </nav>
  </header>

  <main class="container" role="main">
    <div class="page-head">
      <div>
        <h2>Life — a 3 × 3 scrapbook</h2>
        <div class="page-desc">Click any photo to open a larger view. The nine original memories stay here; daily uploads appear in the Gallery.</div>
      </div>
      <div style="text-align:right;color:var(--muted);font-size:13px">Logged in as <strong id="userEmail">you</strong></div>
    </div>

    <section class="photo-grid" aria-label="Scrapbook photos">
      <!-- Photo 1 -->
      <article class="photo-card">
        <a href="photo1.html" aria-label="Open photo 1">
          <img class="photo-thumb" src="photos/photo1.jpg" alt="Photo 1">
        </a>
        <div class="meta">
          <div class="quote">"A smile is the beauty of the soul."</div>
          <div class="byline">Photo 1</div>
        </div>
      </article>

      <!-- Photo 2 -->
      <article class="photo-card">
        <a href="photo2.html" aria-label="Open photo 2">
          <img class="photo-thumb" src="photos/photo2.jpg" alt="Photo 2">
        </a>
        <div class="meta">
          <div class="quote">"Memories are timeless treasures of the heart."</div>
          <div class="byline">Photo 2</div>
        </div>
      </article>

      <!-- Photo 3 -->
      <article class="photo-card">
        <a href="photo3.html" aria-label="Open photo 3">
          <img class="photo-thumb" src="photos/photo3.jpg" alt="Photo 3">
        </a>
        <div class="meta">
          <div class="quote">"Happiness looks good on you."</div>
          <div class="byline">Photo 3</div>
        </div>
      </article>

      <!-- Photo 4 -->
      <article class="photo-card">
        <a href="photo4.html" aria-label="Open photo 4">
          <img class="photo-thumb" src="photos/photo4.jpg" alt="Photo 4">
        </a>
        <div class="meta">
          <div class="quote">"Collect moments, not things."</div>
          <div class="byline">Photo 4</div>
        </div>
      </article>

      <!-- Photo 5 -->
      <article class="photo-card">
        <a href="photo5.html" aria-label="Open photo 5">
          <img class="photo-thumb" src="photos/photo5.jpg" alt="Photo 5">
        </a>
        <div class="meta">
          <div class="quote">"Every picture tells a story."</div>
          <div class="byline">Photo 5</div>
        </div>
      </article>

      <!-- Photo 6 -->
      <article class="photo-card">
        <a href="photo6.html" aria-label="Open photo 6">
          <img class="photo-thumb" src="photos/photo6.jpg" alt="Photo 6">
        </a>
        <div class="meta">
          <div class="quote">"Smiles are contagious."</div>
          <div class="byline">Photo 6</div>
        </div>
      </article>

      <!-- Photo 7 -->
      <article class="photo-card">
        <a href="photo7.html" aria-label="Open photo 7">
          <img class="photo-thumb" src="photos/photo7.jpg" alt="Photo 7">
        </a>
        <div class="meta">
          <div class="quote">"Joy is the best makeup."</div>
          <div class="byline">Photo 7</div>
        </div>
      </article>

      <!-- Photo 8 -->
      <article class="photo-card">
        <a href="photo8.html" aria-label="Open photo 8">
          <img class="photo-thumb" src="photos/photo8.jpg" alt="Photo 8">
        </a>
        <div class="meta">
          <div class="quote">"A moment lasts all of a second, but the memory lives on forever."</div>
          <div class="byline">Photo 8</div>
        </div>
      </article>

      <!-- Photo 9 -->
      <article class="photo-card">
        <a href="photo9.html" aria-label="Open photo 9">
          <img class="photo-thumb" src="photos/photo9.jpg" alt="Photo 9">
        </a>
        <div class="meta">
          <div class="quote">"Keep smiling, it makes people wonder what you're up to."</div>
          <div class="byline">Photo 9</div>
        </div>
      </article>
    </section>

    <footer class="site-foot">
      Crafted with ❤️ · Private memories · <small style="display:block;margin-top:8px;color:#9aa698">Only invited users can access this site</small>
    </footer>
  </main>

  <script>
    // Floating hearts generator (subtle)
    function spawnHeart() {
      const heart = document.createElement('div');
      heart.className = 'floating-heart';
      heart.textContent = '❤';
      heart.style.left = Math.random() * 92 + '%';
      heart.style.bottom = '-20px';
      heart.style.fontSize = (12 + Math.random() * 18) + 'px';
      heart.style.color = ['#ff6b9a','#ff9fb3','#ffd1e0','#ff7aa2'][Math.floor(Math.random()*4)];
      heart.style.animationDuration = (5 + Math.random()*4) + 's';
      document.body.appendChild(heart);
      setTimeout(()=> heart.remove(), 9000);
    }
    // spawn occasionally, not too many
    setInterval(()=> {
      if (Math.random() < 0.28) spawnHeart();
    }, 700);

    // Show logged in user email if available from cookie / global auth object
    (function showEmail() {
      // If server injects user info or you have auth0 client on window, prefer that
      try {
        if (window.auth0Client && auth0Client.getUser) {
          auth0Client.getUser().then(u => {
            if (u && u.email) document.getElementById('userEmail').textContent = u.email;
          }).catch(()=>{});
        } else {
          // fallback: try read from cookie 'shree_session' jwt payload (not ideal from client)
          const match = document.cookie.match(/shree_session=([^;]+)/);
          if (match) {
            try {
              const token = match[1];
              // decode JWT payload
              const payload = JSON.parse(atob(token.split('.')[1].replace(/-/g,'+').replace(/_/g,'/')));
              if (payload && payload.email) document.getElementById('userEmail').textContent = payload.email;
            } catch(e){}
          }
        }
      } catch(e){}
    })();

    // logout handler
    document.getElementById('logout').addEventListener('click', function(e){
      e.preventDefault();
      // call server logout which clears cookie and redirects to Auth0 logout
      // fallback: server route /auth/logout already exists in server.js
      location.href = '/auth/logout';
    });
  </script>
</body>
</html>
