<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Shreshtha — Photo 1</title>

<!-- simple CSP for static private pages -->
<meta http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'; connect-src 'self' https:; img-src 'self' data:; style-src 'self' 'unsafe-inline';">

<style>
  :root{
    --bg1:#ffeef0;
    --accent:#6d2a47;
    --muted:#6b3a3c;
    --card:#fff;
  }

  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:var(--muted);}
  body{
    background:
      radial-gradient(900px 400px at 8% 8%, rgba(255,255,255,0.35), transparent 25%),
      linear-gradient(180deg,#fff0ef 0%, #ffdede 38%, #ffd2d2 100%);
    background-attachment:fixed;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* TOP: small site title removed (user asked), so start big space */
  main{min-height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:28px 20px 120px;}

  /* A4-ish large, but responsive */
  .sheet {
    width:min(1200px, 94%);
    max-width:1400px;
    background:transparent;
    display:block;
    text-align:center;
  }

  /* big image (A4 or bigger look) - no visible frame */
  .photo-wrap{
    width:100%;
    display:flex;
    justify-content:center;
    margin:0;
  }
  .hero {
    width:100%;
    max-width:1100px;            /* large A4-like width; adjust if you want bigger */
    height:auto;
    display:block;
    object-fit:contain;         /* contain so full photo shows, not cropped */
    border-radius:12px;
    box-shadow: 0 28px 60px rgba(0,0,0,0.18);
    background: #fff;
  }

  /* caption centered under photo */
  .caption {
    margin-top:18px;
    display:inline-block;
    background:rgba(255,255,255,0.9);
    padding:10px 18px;
    border-radius:999px;
    font-style:italic;
    color:var(--muted);
    box-shadow:0 8px 24px rgba(0,0,0,0.08);
    font-size:15px;
  }

  /* bottom nav (fixed bottom) */
  .bottom-nav {
    position:fixed; left:0; right:0; bottom:18px; z-index:110;
    display:flex; justify-content:center; gap:18px;
    pointer-events:auto;
  }
  .nav-pill {
    background: #fff; color:var(--muted);
    padding:10px 14px; border-radius:999px; text-decoration:none; font-weight:600;
    box-shadow:0 12px 28px rgba(0,0,0,0.10); font-size:14px;
  }
  .nav-pill.primary { background:var(--accent); color:#fff; }

  /* side heart nav */
  .nav-heart{position:fixed;top:50%;transform:translateY(-50%);font-size:36px;text-decoration:none;z-index:105;opacity:0.95;user-select:none}
  .nav-left{left:18px} .nav-right{right:18px}
  .nav-heart span{display:inline-block; padding:6px; border-radius:999px; background:rgba(109,42,71,0.06); color:var(--accent); box-shadow:0 6px 18px rgba(0,0,0,0.06)}

  /* small music control (bottom-right) */
  .music-btn {
    position:fixed; right:22px; bottom:22px; z-index:160;
    width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,#fffafc,#ffeef2); box-shadow:0 12px 30px rgba(220,90,120,0.14);
    cursor:pointer; border:none;
  }
  .music-btn svg { width:26px;height:26px; display:block; }
  .music-btn.playing svg { filter: drop-shadow(0 8px 18px rgba(255,160,70,0.18)); transform:scale(1.06); }

  /* volume popover */
  .vol-pop { position:fixed; right:18px; bottom:86px; width:220px; padding:10px; border-radius:12px;
            background:linear-gradient(180deg,#fff,#fff7f6); box-shadow:0 12px 36px rgba(0,0,0,0.12); display:none; z-index:170; gap:10px; align-items:center;}
  .vol-pop.show{display:flex}
  .vol-range{width:130px;height:8px;border-radius:999px; background:linear-gradient(90deg,#ffc1c1,#ffd88a); -webkit-appearance:none; outline:none}
  .vol-range::-webkit-slider-thumb{ -webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:#fff;border:3px solid #ffb0a0; box-shadow:0 4px 10px rgba(0,0,0,0.12)}

  /* lightbox */
  .lb { position:fixed; inset:0; display:none; z-index:999; align-items:center; justify-content:center; background:rgba(0,0,0,0.8); }
  .lb img{ max-width:95vw; max-height:95vh; border-radius:8px; }

  /* hearts canvas sits behind content but above background */
  #fxCanvas { position:fixed; left:0; top:0; width:100vw; height:100vh; pointer-events:none; z-index:90; }

  @media (max-width:900px){
    .hero { max-width:94vw; }
    .nav-heart{font-size:30px}
  }
</style>
</head>
<body>

<!-- left/right heart nav -->
<a id="prevHeart" class="nav-heart nav-left" href="#"><span aria-hidden="true">❤</span></a>
<a id="nextHeart" class="nav-heart nav-right" href="#"><span aria-hidden="true">❤</span></a>

<main>
  <div class="sheet" role="main">
    <div class="photo-wrap">
      <!-- if you store on Drive use /api/file/<id> -->
      <img id="heroImg" class="hero" src="/photos/photo1.jpg" alt="Memory photo 1" />
    </div>

    <div style="height:8px"></div>
    <div class="caption" id="caption">“A smile is the beauty of the soul.”</div>
  </div>
</main>

<!-- bottom nav -->
<div class="bottom-nav" role="navigation" aria-label="Site navigation">
  <a class="nav-pill" href="/life.html">Life</a>
  <a class="nav-pill" href="/gallery.html">Gallery</a>
  <a class="nav-pill" href="/auth/logout">Logout</a>
</div>

<!-- music control -->
<button id="musicBtn" class="music-btn" aria-label="Play / Pause music" title="Play / Pause music">
  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 21s-7.33-4.94-9.33-7.02C.8 11.9 2.1 7.9 5.5 6.3 7.2 5.4 9.1 6 10 7.3c.9-1.3 2.8-1.9 4.5-1 3.4 1.6 4.7 5.6 2.8 7.68C19.33 16.06 12 21 12 21z"/></svg>
</button>

<div id="volPop" class="vol-pop" aria-hidden="true">
  <div style="font-size:13px;color:#6b2b2b">Vol</div>
  <input id="volRange" class="vol-range" type="range" min="0" max="100" step="1" value="60" aria-label="Volume" />
  <button id="muteBtn" style="border:none;background:#fff;padding:6px;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,0.06);cursor:pointer" aria-label="Mute">🔈</button>
</div>

<audio id="bgMusic" loop preload="auto"><source src="/music/bg.mp3" type="audio/mpeg"></audio>

<!-- lightbox -->
<div id="lb" class="lb" role="dialog" aria-hidden="true"><img id="lbImg" alt="Large photo"/></div>

<!-- canvas hearts -->
<canvas id="fxCanvas" aria-hidden="true"></canvas>

<script>
/* ---------- prev/next heart logic ---------- */
(function(){
  const img = document.getElementById('heroImg');
  function getIndex(){
    const m = (img && img.src) ? (img.src.match(/photo(\d+)\.jpg/i) || img.src.match(/photo(\d+)\.jpeg/i)) : null;
    if(m && m[1]) return parseInt(m[1],10);
    const p = (location.pathname||'').match(/photo(\d+)\.html/i);
    return p ? parseInt(p[1],10) : 1;
  }
  const total = 9;
  const cur = getIndex();
  const prev = cur>1?cur-1:total, next = cur<total?cur+1:1;
  const prevLink = document.getElementById('prevHeart'), nextLink = document.getElementById('nextHeart');
  if(prevLink) prevLink.href = 'photo'+prev+'.html';
  if(nextLink) nextLink.href = 'photo'+next+'.html';
  if(nextLink) nextLink.addEventListener('click', e=>{ e.preventDefault(); location.href = nextLink.href; });
  if(prevLink) prevLink.addEventListener('click', e=>{ e.preventDefault(); location.href = prevLink.href; });
})();

/* ---------- lightbox ---------- */
(function(){
  const lb = document.getElementById('lb'), lbImg = document.getElementById('lbImg'), hero = document.getElementById('heroImg');
  hero.addEventListener('click', ()=> { lbImg.src = hero.src; lb.style.display='flex'; lb.setAttribute('aria-hidden','false');});
  lb.addEventListener('click', e=> { if(e.target===lb || e.target===lbImg) { lb.style.display='none'; lbImg.src=''; lb.setAttribute('aria-hidden','true'); }});
})();

/* ---------- music + volume UI ---------- */
(function(){
  const music = document.getElementById('bgMusic'), btn = document.getElementById('musicBtn');
  const volPop = document.getElementById('volPop'), volRange = document.getElementById('volRange'), muteBtn = document.getElementById('muteBtn');

  function applyVolume(v){ music.volume = Math.max(0,Math.min(100,parseInt(v||60,10)))/100; try{ localStorage.setItem('shree_music_volume', String(v)); }catch(e){} }
  try{ const sv = localStorage.getItem('shree_music_volume'); if(sv!==null) volRange.value = sv; }catch(e){}
  applyVolume(volRange.value);

  function setPlaying(state){
    if(state){ btn.classList.add('playing'); music.play().catch(()=>{}); try{ localStorage.setItem('shree_music_playing','1'); }catch(e){}; btn.title='Pause music'; }
    else{ btn.classList.remove('playing'); music.pause(); try{ localStorage.setItem('shree_music_playing','0'); }catch(e){}; btn.title='Play music'; }
  }
  try{ if(localStorage.getItem('shree_music_playing') === '1'){ music.play().then(()=>setPlaying(true)).catch(()=>setPlaying(false)); } }catch(e){}

  btn.addEventListener('click', (e) => {
    // if vol pop is open, allow clicking outside first
    if(volPop.classList.contains('show')){ volPop.classList.remove('show'); volPop.setAttribute('aria-hidden','true'); return; }
    setPlaying(!btn.classList.contains('playing'));
  });

  // long-press badge? we use right-click-ish by double click to open vol; but simpler: ctrl+click opens volume
  btn.addEventListener('contextmenu', (e)=>{ e.preventDefault(); volPop.classList.toggle('show'); volPop.setAttribute('aria-hidden', volPop.classList.contains('show') ? 'false' : 'true'); });
  btn.addEventListener('dblclick', (e)=>{ volPop.classList.toggle('show'); volPop.setAttribute('aria-hidden', volPop.classList.contains('show') ? 'false' : 'true'); });

  volRange.addEventListener('input', ()=> applyVolume(volRange.value));
  muteBtn.addEventListener('click', ()=> { if(music.volume>0){ volRange.dataset.prev = volRange.value; volRange.value = 0; } else { volRange.value = volRange.dataset.prev || 60;} applyVolume(volRange.value); });

  // hide pop when clicking outside
  document.addEventListener('click', (e)=> { if(!e.target.closest('.vol-pop') && !e.target.closest('#musicBtn')){ volPop.classList.remove('show'); volPop.setAttribute('aria-hidden','true'); }});
})();

/* ---------- floating pastel hearts (canvas) ---------- */
(function(){
  const c = document.getElementById('fxCanvas');
  if(!c) return;
  const ctx = c.getContext('2d');
  const DPR = Math.max(1, window.devicePixelRatio||1);
  let W=0,H=0, hearts=[]; const COLORS = ['#ffd6e0','#ffe8cc','#e9f7ff','#e5d6ff','#ffd1fa','#fff9d6','#ffe9ec'];
  function R(a,b){ return Math.random()*(b-a)+a; }
  function resize(){ W = innerWidth*DPR; H = innerHeight*DPR; c.width=W; c.height=H; c.style.width='100vw'; c.style.height='100vh'; }
  function spawn(){
    if(hearts.length>30) return;
    hearts.push({
      x: R(0,W), y: H + R(10*DPR, 120*DPR),
      s: R(8,22), vx: R(-8,8), vy: -R(14,32), a: R(.6, .98), r: R(-0.6,0.6), vr: R(-.012,.012),
      color: COLORS[Math.floor(Math.random()*COLORS.length)]
    });
  }
  function drawHeart(px,py,scale,rot,alpha,color){
    ctx.save(); ctx.translate(px,py); ctx.rotate(rot); ctx.scale(scale,scale);
    ctx.globalAlpha = Math.min(1, alpha*1.05);
    const g = ctx.createRadialGradient(0,-0.12,0.05,0,0.12,1.0); g.addColorStop(0,color); g.addColorStop(1,'rgba(255,255,255,0.08)');
    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.moveTo(0,-0.5);
    ctx.bezierCurveTo(0.45,-1.05,1.15,-0.05,0,0.8);
    ctx.bezierCurveTo(-1.15,-0.05,-0.45,-1.05,0,-0.5);
    ctx.fill();
    ctx.globalAlpha = 0.45 * alpha;
    ctx.fillStyle = 'rgba(255,255,255,0.9)';
    ctx.beginPath(); ctx.ellipse(0.18,-0.28,0.12,0.06,-0.4,0,Math.PI*2); ctx.fill();
    ctx.restore(); ctx.shadowBlur=0;
  }
  function tick(){
    ctx.clearRect(0,0,W,H);
    if(Math.random()<0.12) spawn();
    hearts.forEach(h=>{ h.x += h.vx * 0.016; h.y += h.vy * 0.016; h.r += h.vr; h.a -= 0.0008; });
    hearts = hearts.filter(h => h.y > -120*DPR && h.a > 0.02);
    hearts.forEach(h => drawHeart(h.x, h.y, (h.s/50)*DPR, h.r, h.a, h.color));
    requestAnimationFrame(tick);
  }
  addEventListener('resize', resize, {passive:true});
  resize(); tick();
})();
</script>
</body>
</html>
