<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shreshtha — Photo 1</title>

  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self' https:; img-src 'self' data:; style-src 'self' 'unsafe-inline'; media-src 'self';">

  <!-- Auth -->
  <script src="/auth0-spa-js.production.js" defer></script>
  <script src="/auth-init.js" defer></script>
  <script src="/guard-auth.js" defer></script>

  <!-- use same life/upload background & music styling -->
  <link rel="stylesheet" href="/assets/css/music-heart.css">
  <script src="/assets/js/music-heart.js" defer></script>

  <style>
    :root{
      --ink:#6d232b;
      --muted:#7a4350;
      --bg1:#fff0ef; --bg2:#ffd6d6;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial}
    body{
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(255,236,240,0.25), transparent 20%),
        radial-gradient(900px 500px at 95% 85%, rgba(255,240,230,0.18), transparent 18%),
        linear-gradient(160deg, var(--bg1) 0%, var(--bg2) 18%, #ffc0be 38%, #ffb3b3 60%, #ffb0b0 100%);
      background-attachment: fixed;
      color:var(--ink);
      overflow-y:auto;
    }

    /* container */
    .wrap{max-width:1400px;margin:18px auto;padding:18px; display:block}

    /* photo stage: NO white gutters — image fills main column */
    .photo-card{
      background:transparent;
      border-radius:0;
      padding:8px 12px 40px;
      margin:8px 0;
      position:relative;
    }

    .photo-area{
      display:flex;
      justify-content:center;
      align-items:flex-start;
    }

    /* large portrait container - no white side panels */
    .photo-wrap{
      width:min(1100px,92vw);
      display:block;
      background:transparent;
      border-radius:12px;
      overflow:visible;
      margin:0 auto;
      padding:0;
      text-align:center;
    }

    .photo-wrap img{
      display:block;
      width:100%;
      height:auto;
      max-height:180vh;      /* allow very tall scrollable image */
      object-fit:contain;
      border-radius:10px;
      box-shadow: 0 20px 46px rgba(0,0,0,0.10);
      background:transparent;
    }

    /* caption */
    .caption{ text-align:center;margin:18px 0 8px; }
    .pill{
      display:inline-block;
      background:linear-gradient(180deg,#fff,#fff0f2);
      padding:12px 22px;border-radius:999px;
      box-shadow:0 12px 30px rgba(0,0,0,0.06);
      font-style:italic;color:var(--muted);
    }

    /* bottom nav small */
    .bottom-nav{ display:flex;gap:12px;justify-content:center;margin-top:10px }
    .bottom-nav a{ text-decoration:none;padding:8px 14px;border-radius:999px;background:rgba(255,255,255,0.9);color:var(--ink);box-shadow:0 8px 20px rgba(0,0,0,0.06);font-weight:700 }

    /* left & right small nav hearts */
    .nav-heart{
      position:fixed;top:50%;transform:translateY(-50%);width:56px;height:56px;border-radius:999px;
      display:flex;align-items:center;justify-content:center;z-index:150;cursor:pointer;
      box-shadow:0 12px 30px rgba(0,0,0,0.10); background:linear-gradient(180deg,#fffafc,#ffeef2);
    }
    .nav-left{left:14px}
    .nav-right{right:14px}
    .nav-inner{width:40px;height:40px;border-radius:999px;background:#6d2a47;display:flex;align-items:center;justify-content:center;color:#fff;font-size:18px}

    /* fx canvas (floating hearts/dots like life.html) */
    #fxCanvas{ position:fixed; left:0; top:0; width:100vw; height:100vh; pointer-events:none; z-index:20; }

    /* small responsive tweaks */
    @media (max-width:900px){
      .photo-wrap{ width:min(760px,94vw) }
      .nav-heart{ width:48px;height:48px }
      .nav-inner{ width:34px;height:34px }
    }
    @media (max-width:420px){
      .photo-wrap{ width:96vw }
      .photo-wrap img{ max-height:140vh }
    }
  </style>
</head>
<body>

  <!-- left -> life (back) ; right -> next photo -->
  <a id="prevHeart" class="nav-heart nav-left" href="life.html" aria-label="Back to Life">
    <span class="nav-inner">❤</span>
  </a>
  <a id="nextHeart" class="nav-heart nav-right" href="photo2.html" aria-label="Next photo">
    <span class="nav-inner">❤</span>
  </a>

  <!-- floating hearts/dots canvas -->
  <canvas id="fxCanvas" aria-hidden="true"></canvas>

  <main class="wrap" role="main">
    <article class="photo-card" role="article" aria-label="Photo 1">
      <div class="photo-area">
        <div class="photo-wrap">
          <!-- replace with secure streaming path if used: /api/file/<id> -->
          <img id="mainPhoto" src="/photos/photo1.jpg" alt="Memory 1 — Shreshtha">
        </div>
      </div>

      <div class="caption">
        <div class="pill">“A smile is the beauty of the soul.”</div>
      </div>

      <nav class="bottom-nav" aria-label="page links">
        <a href="life.html">Life</a>
        <a href="gallery.html">Gallery</a>
        <a href="/auth/logout">Logout</a>
      </nav>
    </article>
  </main>

  <!-- The upload.html music uses these CSS/JS files — we included them in the head.
       If you prefer the inline implementation instead, I can paste that here too. -->

  <!-- small script: prev/next stable urls -->
  <script>
    (function(){
      const total = 9;
      function getIndex(){ const m = (location.pathname||'').match(/photo(\d+)\.html/i); return m? parseInt(m[1],10) : 1; }
      const cur = getIndex();
      const prev = cur>1 ? cur-1 : total;
      const next = cur<total ? cur+1 : 1;
      const prevLink = document.getElementById('prevHeart');
      const nextLink = document.getElementById('nextHeart');
      if(prevLink) prevLink.href = (cur===1 ? 'life.html' : 'photo'+prev+'.html');
      if(nextLink) nextLink.href = 'photo'+next+'.html';
    })();
  </script>

  <!-- floating hearts/dots canvas script (life-like small colorful dots/hearts) -->
  <script>
    (function(){
      const c = document.getElementById('fxCanvas');
      if(!c) return;
      const ctx = c.getContext('2d');
      const DPR = Math.max(1, window.devicePixelRatio || 1);
      let W=0, H=0, parts=[];
      const COLORS = ['#ffd6e0','#fff6a6','#ffd89e','#d6f5c6','#d6e0ff','#ffd1ea','#ffe3b8'];
      const R=(a,b)=>Math.random()*(b-a)+a;
      function resize(){ W = Math.floor(window.innerWidth*DPR); H = Math.floor(window.innerHeight*DPR); c.width=W; c.height=H; c.style.width='100vw'; c.style.height='100vh'; }
      function spawn(){
        if(parts.length > 130) return;
        parts.push({
          x: R(0,W),
          y: H + R(40*DPR,220*DPR),
          r: R(3,12)*DPR,
          vx: R(-0.25,0.25)*DPR,
          vy: -R(0.35,1.0)*DPR,
          a: R(0.45,0.98),
          col: COLORS[Math.floor(Math.random()*COLORS.length)]
        });
      }
      function draw(p){
        ctx.save();
        ctx.globalAlpha = p.a;
        ctx.fillStyle = p.col;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fill();
        ctx.restore();
      }
      function tick(){
        ctx.clearRect(0,0,W,H);
        if(Math.random() < 0.14) spawn();
        for(let i=parts.length-1;i>=0;i--){
          const p = parts[i];
          p.x += p.vx;
          p.y += p.vy;
          p.a -= 0.0009;
          if(p.y < -60*DPR || p.a <= 0.02) parts.splice(i,1);
          else draw(p);
        }
        requestAnimationFrame(tick);
      }
      addEventListener('resize', resize, {passive:true});
      resize(); tick();
    })();
  </script>

</body>
</html>
