<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Shreshtha • Photo 1</title>
<style>
  :root{
    --bg1:#ffe9ef; --bg2:#ffdbe6; --accent:#6d2a47; --muted:#6b3a3c;
    --pill-bg: rgba(255,255,255,0.95);
    --card-shadow: 0 30px 80px rgba(90,52,70,0.12);
  }
  html,body{height:100%;margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial}
  body{
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    min-height:100vh; display:flex; align-items:flex-start; justify-content:center;
  }
  .page { width:100%; max-width:1200px; margin:28px auto 80px; padding: 18px; box-sizing:border-box;}
  header{ text-align:center; margin-bottom:12px }
  h1{ margin:0; font-family:"Playfair Display", serif; color:var(--muted); font-size:28px }
  .frame{ background: transparent; border-radius:18px; padding:0; display:flex; flex-direction:column; align-items:center; }
  .hero-wrap{ width:100%; display:flex; justify-content:center; }
  .hero {
    display:block;
    width:min(920px, 78vw);
    height:auto;
    max-height:82vh;
    object-fit:contain;
    border-radius:12px;
    box-shadow:var(--card-shadow);
    background:var(--pill-bg);
    border: 8px solid rgba(255,255,255,0.9);
    transition: transform .22s ease;
    cursor:zoom-in;
  }
  .caption { margin-top:14px; background:var(--pill-bg); color:var(--muted); padding:8px 14px; border-radius:999px; font-style:italic; box-shadow:0 12px 30px rgba(0,0,0,0.06); max-width:90%; text-align:center; }
  .actions { margin-top:18px; display:flex; gap:12px; justify-content:center; }
  .pill { background:var(--pill-bg); color:var(--muted); padding:9px 14px; border-radius:999px; text-decoration:none; font-weight:600; box-shadow:0 12px 30px rgba(0,0,0,0.06); }
  .pill.primary{ background:var(--accent); color:#fff; }
  .nav-heart{ position:fixed; top:50%; transform:translateY(-50%); font-size:28px; text-decoration:none; z-index:30; color:var(--accent); user-select:none; padding:8px; }
  .nav-left{ left:18px } .nav-right{ right:18px }
  .music-wrap{ position:fixed; right:18px; bottom:18px; z-index:40; display:flex; flex-direction:column; gap:8px; align-items:center; }
  .music-btn{ width:52px; height:52px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:linear-gradient(#fff,#ffeef3); border:1px solid rgba(109,42,71,0.08); box-shadow:0 10px 28px rgba(0,0,0,0.14); cursor:pointer; font-weight:700; color:var(--accent) }
  .vol{ width:120px; padding:6px; border-radius:999px; background:var(--pill-bg); display:none; box-shadow:0 10px 20px rgba(0,0,0,0.08); }
  .vol input[type=range]{ width:100%; }
  #heartsCanvas{ position:fixed; inset:0; pointer-events:none; z-index:1; }
  @media (max-width:520px){ .hero{ width:min(100%,94vw); max-height:62vh; } }
</style>
</head>
<body>

<canvas id="heartsCanvas" aria-hidden="true"></canvas>

<!-- photo1: left -> life.html, right -> photo2.html -->
<a id="leftHeart" class="nav-heart nav-left" href="/life.html" aria-label="Previous">❤</a>
<a id="rightHeart" class="nav-heart nav-right" href="photo2.html" aria-label="Next">❤</a>

<div class="page">
  <header><h1>Sweet Memories of Shreshtha’s Life</h1></header>
  <main class="frame" role="main">
    <!-- PER-PAGE VALUES -->
    <script>const IMG_SRC = '/photos/photo1.jpg'; const CAPTION = "A smile is the beauty of the soul.";</script>

    <div class="hero-wrap">
      <img id="heroImg" class="hero" src="" alt="Memory image 1">
    </div>

    <div class="caption" id="captionEl"></div>

    <div class="actions">
      <a class="pill" id="galleryBtn" href="/gallery.html">Gallery</a>
      <a class="pill primary" id="lifeBtn" href="/life.html">Life</a>
      <a class="pill" id="logoutBtn" href="/auth/logout">Logout</a>
    </div>
  </main>
</div>

<div class="music-wrap">
  <button id="musicBtn" class="music-btn" title="Play / Pause">♪</button>
  <div class="vol" id="volWrap" aria-hidden="true">
    <input id="volRange" type="range" min="0" max="100" step="1" value="80">
  </div>
</div>

<audio id="bgMusic" src="/music/bg.mp3" loop preload="auto"></audio>

<script>
/* init */
(function(){
  const hero = document.getElementById('heroImg');
  const cap = document.getElementById('captionEl');
  hero.src = (typeof IMG_SRC !== 'undefined') ? IMG_SRC : '/photos/photo1.jpg';
  cap.textContent = (typeof CAPTION !== 'undefined') ? CAPTION : '';

  hero.addEventListener('click', function(){
    const overlay = document.createElement('div');
    overlay.style.position='fixed'; overlay.style.inset='0'; overlay.style.background='rgba(0,0,0,0.92)';
    overlay.style.display='flex'; overlay.style.alignItems='center'; overlay.style.justifyContent='center';
    overlay.style.zIndex='99999'; overlay.style.padding='24px';
    const img = document.createElement('img'); img.src = hero.src;
    img.style.maxWidth='98vw'; img.style.maxHeight='96vh'; img.style.objectFit='contain'; img.style.borderRadius='10px';
    overlay.appendChild(img);
    const btn = document.createElement('button'); btn.textContent='✕';
    btn.style.position='absolute'; btn.style.top='16px'; btn.style.right='18px'; btn.style.background='transparent';
    btn.style.color='#fff'; btn.style.fontSize='22px'; btn.style.border='none'; btn.style.cursor='pointer';
    overlay.appendChild(btn); btn.addEventListener('click', ()=> overlay.remove());
    overlay.addEventListener('click', (e)=> { if(e.target===overlay) overlay.remove(); });
    document.body.appendChild(overlay);
  });
})();

/* logout */
(function(){
  const btn = document.getElementById('logoutBtn');
  if(!btn) return;
  btn.addEventListener('click', function(ev){
    ev.preventDefault();
    fetch('/auth/logout', { method:'GET', credentials:'include' }).catch(()=>{}).finally(()=> location.href = '/index.html' );
  }, { passive:true });
})();

/* music + volume */
(function(){
  const audio = document.getElementById('bgMusic');
  const btn = document.getElementById('musicBtn');
  const volWrap = document.getElementById('volWrap');
  const volRange = document.getElementById('volRange');
  const vol = Number(localStorage.getItem('shree_vol') || 80);
  audio.volume = Math.max(0, Math.min(1, vol/100));
  volRange.value = Math.round(audio.volume * 100);
  if(localStorage.getItem('shree_play') === 'true') audio.play().catch(()=>{});
  btn.addEventListener('click', function(){
    if(audio.paused){ audio.play().catch(()=>{}); localStorage.setItem('shree_play','true'); }
    else { audio.pause(); localStorage.setItem('shree_play','false'); }
    volWrap.style.display = volWrap.style.display === 'block' ? 'none' : 'block';
    if(volWrap.style.display === 'block') setTimeout(()=> volWrap.style.display = 'none', 5000);
  }, { passive:true });
  volRange.addEventListener('input', function(){ audio.volume = Number(volRange.value)/100; localStorage.setItem('shree_vol', String(volRange.value)); }, { passive:true });
})();

/* hearts canvas (small colorful, subtle) */
(function(){
  const canvas = document.getElementById('heartsCanvas'); if(!canvas) return;
  const ctx = canvas.getContext('2d'); let W=innerWidth, H=innerHeight;
  function resize(){ W=innerWidth; H=innerHeight; canvas.width=W; canvas.height=H; } addEventListener('resize', resize); resize();
  const colors=['#ffd3e3','#ffebc8','#fff1b8','#d4f8d6','#dbeeff','#e9dbff'];
  const hearts=[];
  function spawn(){ return { x: Math.random()*W, y: H + 10, s: 6 + Math.random()*8, vy: -0.6 - Math.random()*0.9, a: 0.95 + Math.random()*0.2, col: colors[Math.floor(Math.random()*colors.length)] }; }
  function draw(h){ ctx.save(); ctx.translate(h.x,h.y); ctx.scale(h.s/22,h.s/22); ctx.globalAlpha=Math.max(0,h.a); ctx.fillStyle=h.col; ctx.beginPath(); ctx.moveTo(0,-8); ctx.bezierCurveTo(8,-20,28,-10,0,22); ctx.bezierCurveTo(-28,-10,-8,-20,0,-8); ctx.fill(); ctx.restore(); }
  function frame(){ ctx.clearRect(0,0,W,H); if(hearts.length<40 && Math.random()<0.6) hearts.push(spawn()); for(let i=hearts.length-1;i>=0;i--){ const h=hearts[i]; h.y+=h.vy; h.x+=Math.sin((h.y+h.s)*0.02)*0.4; h.a-=0.0025; draw(h); if(h.y<-80||h.a<=0) hearts.splice(i,1); } requestAnimationFrame(frame); } frame();
})();
</script>
</body>
</html>
